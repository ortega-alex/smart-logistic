import{r,j as e,q as v}from"./index-BKeSh-za.js";import{s as m,B as x,I}from"./method-http.utility-BqWs-HUi.js";import{a as k,b as A,h as L}from"./crane.service-DvRpMOh6.js";import{S as O}from"./Search-C06RTD8T.js";import{M as N}from"./Utilityes.d-EXBqBskY.js";import{h as T}from"./aution.service-D5suFi5p.js";import{F as n}from"./index-D1ov7vNX.js";import{I as F}from"./index-CdhWyq-o.js";import{S as E,F as M}from"./Table-BisBHS4k.js";import{T as G}from"./index-O4SDTvlh.js";import{S as $}from"./index-Cz9KrAQ8.js";import{L as q}from"./index-CvXNAYlc.js";import{M as B}from"./index-DR3JyN9M.js";import"./row-xrRCuAxq.js";import"./DownOutlined-uChH8jli.js";import"./Notification-BCtfLTOT.js";import"./customer.service-CpYLP9T3.js";import"./user.service-DGdalJkS.js";import"./fade-CQfhyCPf.js";const _={id_grua:0,grua:"",estado:!0,moneda:"$",costo:0},z=({crane:i,onClose:l})=>{const[u,h]=r.useState([]),[d,c]=r.useState(!1),g=async t=>{try{c(!0);let o;i.id_grua>0?o=await k({...i,...t}):o=await A(t),o.message?m.warning(o.message):(m.success(`Grua ${i.id_grua>0?"editada":"agregada"} correctamente`),l())}catch(o){m.error(`Error http add crane: ${o.message}`)}finally{c(!1)}};return r.useEffect(()=>{T().then(t=>h(t)).catch(t=>m.error(`Error http get autions: ${t.message}`))},[]),e.jsxs(n,{layout:"vertical",initialValues:i,onFinish:g,children:[e.jsx(n.Item,{label:"Nombre",name:"grua",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(F,{placeholder:"Ingrese el nombre"})}),e.jsx(n.Item,{label:"Subasta (Opcional)",name:"id_subasta",children:e.jsx(E,{allowClear:!0,className:"w-100",placeholder:"Seleccione una opción",options:u.filter(t=>t.estado).map(t=>({value:t.id_subasta,label:t.subasta}))})}),e.jsx(n.Item,{label:"Costo",name:"costo",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(G,{className:"w-100",addonBefore:e.jsx(n.Item,{name:"moneda",style:{margin:0,padding:0,width:80},children:e.jsx(E,{className:"w-100",options:Object.keys(N).map(t=>({value:N[t],label:t}))})}),min:0,placeholder:"Ingrese un costo"})}),e.jsx(n.Item,{name:"estado",label:"Estado",valuePropName:"checked",children:e.jsx($,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"text-right",children:e.jsx(x,{type:"primary",htmlType:"submit",loading:d,disabled:d,children:"Enviar"})})]})},ie=()=>{const i=v(s=>s.device),l="Gruas",[u,h]=r.useState(_),[d,c]=r.useState([]),[g,t]=r.useState([]),[o,p]=r.useState(!1),[b,j]=r.useState(!1),C=s=>{let a=[...g];s.trim()!==""&&(a=a.filter(f=>{var w;return f.id_grua===Number(s)||f.grua.toLowerCase().indexOf(s.toLowerCase())!==-1||((w=f.subasta)==null?void 0:w.subasta.toLowerCase().indexOf(s.toLowerCase()))!==-1})),c(a)},y=s=>{var a;h({...s,id_subasta:(a=s.subasta)==null?void 0:a.id_subasta}),p(!0)},S=()=>{j(!0),L().then(s=>{c(s),t(s)}).catch(s=>m.error(`Error http get cranes: ${s.message}`)).finally(()=>j(!1))};return r.useEffect(()=>{S()},[]),e.jsxs("div",{className:"h-100 flex flex-column p-3",children:[e.jsxs("div",{className:"flex flex-md-column gap-3 justify-between",children:[e.jsx("h3",{children:l}),e.jsx("div",{children:e.jsx(O,{onSearch:C,onReset:()=>C("")})}),e.jsx(x,{type:"primary",htmlType:"button",onClick:()=>{h(_),p(!0)},children:"Agregar"})]}),i?e.jsx(q,{dataSource:d,loading:b,renderItem:s=>{var a;return e.jsxs("div",{className:"item-list",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Nombre: "})," ",s.grua]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Subasta: "})," ",(a=s.subasta)==null?void 0:a.subasta]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estado: "})," ",s.estado?"Activo":"Inactivo"]}),e.jsx(x,{type:"link",danger:!0,htmlType:"button",icon:e.jsx(I.Edit,{}),onClick:()=>y(s),children:"Editar"})]})]},s.id_subasta)}}):e.jsx(M,{size:"small",rowClassName:(s,a)=>a%2===0?"table-row-light":"table-row-dark",pagination:!1,className:"table",loading:b,showSorterTooltip:!1,rowKey:"id_grua",dataSource:d,columns:[{title:"No",dataIndex:"id_grua"},{title:"Nombre",dataIndex:"grua",ellipsis:!0,sorter:!0},{title:"Subasta",dataIndex:"subasta",ellipsis:!0,sorter:!0,render:s=>e.jsx("span",{children:s==null?void 0:s.subasta})},{title:"Estado",dataIndex:"estado",render:s=>e.jsx("span",{className:s?"text-success":"text-danger",children:s?"Actuvi":"Inactivo"})},{title:"Opciones",dataIndex:"operacion",width:80,render:(s,a)=>e.jsx("div",{className:"text-center",children:e.jsx(x,{style:{width:40},icon:e.jsx(I.Edit,{}),type:"primary",size:"small",onClick:()=>y(a)})})}]}),e.jsx(B,{open:o,title:e.jsxs("h3",{children:[u.id_grua>0?"Editar":"Agregar"," ",l.substring(0,l.length-1)]}),footer:null,onCancel:()=>p(!1),centered:!0,destroyOnClose:!0,children:e.jsx(z,{crane:u,onClose:()=>{S(),p(!1)}})})]})};export{ie as Crane};
