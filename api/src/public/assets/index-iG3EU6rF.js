import{K as se,f as L,r as l,C as re,e as _,m as ie,M as ae,av as B,aL as le,at as ce,S as de,V as me,U as pe,v as P,a as ue,j as r,b as D}from"./index-DeRs25tb.js";import{g as fe,N as ge,T as w,B as I,I as S}from"./Icon-ZCyfFCep.js";import{S as he}from"./Search-DWezstAv.js";import{g as z}from"./format.utility-DkVYUxV5.js";import{p as ve,R as xe,a as ye,d as be,c as Ce,b as $e,h as Ie,s as j}from"./method-http.utility-CuofCWHh.js";import{b as Se}from"./vehicles.service-M8jK2tQK.js";import{L as je}from"./index-JgT2oeId.js";import{F as Ee}from"./Table-B2h2cI4i.js";import{U as we}from"./index-BnQTAwiB.js";import"./index-gyB3Elxo.js";import"./fuctions.utility-D0ENTGxM.js";import"./row-Dx3yH235.js";import"./progress-D11ttJlT.js";const E=(e,o,n,s,a)=>({background:e,border:`${L(s.lineWidth)} ${s.lineType} ${o}`,[`${a}-icon`]:{color:n}}),_e=e=>{const{componentCls:o,motionDurationSlow:n,marginXS:s,marginSM:a,fontSize:d,fontSizeLG:p,lineHeight:g,borderRadiusLG:h,motionEaseInOutCirc:u,withDescriptionIconSize:x,colorText:b,colorTextHeading:t,withDescriptionPadding:m,defaultPadding:c}=e;return{[o]:Object.assign(Object.assign({},se(e)),{position:"relative",display:"flex",alignItems:"center",padding:c,wordWrap:"break-word",borderRadius:h,[`&${o}-rtl`]:{direction:"rtl"},[`${o}-content`]:{flex:1,minWidth:0},[`${o}-icon`]:{marginInlineEnd:s,lineHeight:0},"&-description":{display:"none",fontSize:d,lineHeight:g},"&-message":{color:t},[`&${o}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${n} ${u}, opacity ${n} ${u},
        padding-top ${n} ${u}, padding-bottom ${n} ${u},
        margin-bottom ${n} ${u}`},[`&${o}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${o}-with-description`]:{alignItems:"flex-start",padding:m,[`${o}-icon`]:{marginInlineEnd:a,fontSize:x,lineHeight:0},[`${o}-message`]:{display:"block",marginBottom:s,color:t,fontSize:p},[`${o}-description`]:{display:"block",color:b}},[`${o}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Ne=e=>{const{componentCls:o,colorSuccess:n,colorSuccessBorder:s,colorSuccessBg:a,colorWarning:d,colorWarningBorder:p,colorWarningBg:g,colorError:h,colorErrorBorder:u,colorErrorBg:x,colorInfo:b,colorInfoBorder:t,colorInfoBg:m}=e;return{[o]:{"&-success":E(a,s,n,e,o),"&-info":E(m,t,b,e,o),"&-warning":E(g,p,d,e,o),"&-error":Object.assign(Object.assign({},E(x,u,h,e,o)),{[`${o}-description > pre`]:{margin:0,padding:0}})}}},Re=e=>{const{componentCls:o,iconCls:n,motionDurationMid:s,marginXS:a,fontSizeIcon:d,colorIcon:p,colorIconHover:g}=e;return{[o]:{"&-action":{marginInlineStart:a},[`${o}-close-icon`]:{marginInlineStart:a,padding:0,overflow:"hidden",fontSize:d,lineHeight:L(d),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${n}-close`]:{color:p,transition:`color ${s}`,"&:hover":{color:g}}},"&-close-text":{color:p,transition:`color ${s}`,"&:hover":{color:g}}}}},Me=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),Oe=fe("Alert",e=>[_e(e),Ne(e),Re(e)],Me);var H=function(e,o){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&o.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)o.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(n[s[a]]=e[s[a]]);return n};const Te={success:ye,info:be,error:Ce,warning:$e},Be=e=>{const{icon:o,prefixCls:n,type:s}=e,a=Te[s]||null;return o?ge(o,l.createElement("span",{className:`${n}-icon`},o),()=>({className:_(`${n}-icon`,{[o.props.className]:o.props.className})})):l.createElement(a,{className:`${n}-icon`})},Pe=e=>{const{isClosable:o,prefixCls:n,closeIcon:s,handleClose:a,ariaProps:d}=e,p=s===!0||s===void 0?l.createElement(xe,null):s;return o?l.createElement("button",Object.assign({type:"button",onClick:a,className:`${n}-close-icon`,tabIndex:0},d),p):null},k=l.forwardRef((e,o)=>{const{description:n,prefixCls:s,message:a,banner:d,className:p,rootClassName:g,style:h,onMouseEnter:u,onMouseLeave:x,onClick:b,afterClose:t,showIcon:m,closable:c,closeText:$,closeIcon:C,action:N,id:V}=e,Y=H(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[R,U]=l.useState(!1),M=l.useRef(null);l.useImperativeHandle(o,()=>({nativeElement:M.current}));const{getPrefixCls:F,direction:W,alert:i}=l.useContext(re),f=F("alert",s),[G,X,q]=Oe(f),K=v=>{var y;U(!0),(y=e.onClose)===null||y===void 0||y.call(e,v)},O=l.useMemo(()=>e.type!==void 0?e.type:d?"warning":"info",[e.type,d]),J=l.useMemo(()=>typeof c=="object"&&c.closeIcon||$?!0:typeof c=="boolean"?c:C!==!1&&C!==null&&C!==void 0?!0:!!(i!=null&&i.closable),[$,C,c,i==null?void 0:i.closable]),T=d&&m===void 0?!0:m,Q=_(f,`${f}-${O}`,{[`${f}-with-description`]:!!n,[`${f}-no-icon`]:!T,[`${f}-banner`]:!!d,[`${f}-rtl`]:W==="rtl"},i==null?void 0:i.className,p,g,q,X),Z=ve(Y,{aria:!0,data:!0}),ee=l.useMemo(()=>{var v,y;return typeof c=="object"&&c.closeIcon?c.closeIcon:$||(C!==void 0?C:typeof(i==null?void 0:i.closable)=="object"&&(!((v=i==null?void 0:i.closable)===null||v===void 0)&&v.closeIcon)?(y=i==null?void 0:i.closable)===null||y===void 0?void 0:y.closeIcon:i==null?void 0:i.closeIcon)},[C,c,$,i==null?void 0:i.closeIcon]),oe=l.useMemo(()=>{const v=c??(i==null?void 0:i.closable);return typeof v=="object"?H(v,["closeIcon"]):{}},[c,i==null?void 0:i.closable]);return G(l.createElement(ie,{visible:!R,motionName:`${f}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:v=>({maxHeight:v.offsetHeight}),onLeaveEnd:t},(v,y)=>{let{className:te,style:ne}=v;return l.createElement("div",Object.assign({id:V,ref:ae(M,y),"data-show":!R,className:_(Q,te),style:Object.assign(Object.assign(Object.assign({},i==null?void 0:i.style),h),ne),onMouseEnter:u,onMouseLeave:x,onClick:b,role:"alert"},Z),T?l.createElement(Be,{description:n,icon:e.icon,prefixCls:f,type:O}):null,l.createElement("div",{className:`${f}-content`},a?l.createElement("div",{className:`${f}-message`},a):null,n?l.createElement("div",{className:`${f}-description`},n):null),N?l.createElement("div",{className:`${f}-action`},N):null,l.createElement(Pe,{isClosable:J,prefixCls:f,closeIcon:ee,handleClose:K,ariaProps:oe}))}))});function De(e,o,n){return o=B(o),le(e,ce()?Reflect.construct(o,n||[],B(e).constructor):o.apply(e,n))}let ze=function(e){function o(){var n;return pe(this,o),n=De(this,o,arguments),n.state={error:void 0,info:{componentStack:""}},n}return de(o,e),me(o,[{key:"componentDidCatch",value:function(s,a){this.setState({error:s,info:a})}},{key:"render",value:function(){const{message:s,description:a,id:d,children:p}=this.props,{error:g,info:h}=this.state,u=(h==null?void 0:h.componentStack)||null,x=typeof s>"u"?(g||"").toString():s,b=typeof a>"u"?u:a;return g?l.createElement(k,{id:d,type:"error",message:x,description:l.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},b)}):p}}])}(l.Component);const A=k;A.ErrorBoundary=ze;const He="/import-history",Le=async(e,o)=>await Ie({path:`${He}/${e}`,method:"POST",data:{file:o},type:"multipart"}),Ze=()=>{const e=P(t=>t.device),o=P(t=>t.session_customer),n=ue(),[s,a]=l.useState(!1),[d,p]=l.useState([]),[g,h]=l.useState(""),u=t=>n(`/${D.PRIVATE_CUSTOMER}/${D.CUSTOMER_ORDER_DETAIL}/${t}`),x=()=>{a(!0),Se(o.id_cliente).then(t=>p(t)).catch(t=>j.error(`Error http get vehicles by customer id ${t.message}`)).finally(()=>a(!1))},b=(t,m)=>{Le(m,t).then(c=>{c.success?(j.success(c.message),x()):j.warning(c.message)}).catch(c=>j.error(`Error http upload invoice ${c.message}`))};return l.useEffect(()=>{console.log(g),x()},[]),r.jsxs("div",{className:"h-100 flex flex-column p-3",children:[r.jsxs("div",{className:"flex justify-center mb-3",children:[r.jsx(w,{title:"Recargar",children:r.jsx(I,{type:"text",htmlType:"button",icon:r.jsx(S.Reload,{}),onClick:()=>x()})}),r.jsx(he,{onSearch:t=>h(t),onReset:()=>h("")})]}),e?r.jsx(je,{dataSource:d,loading:s,renderItem:t=>r.jsxs("div",{className:"item-list",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("strong",{children:"fecha_creacion: "})," ",z(t.fecha_creacion??"","DD/MM/YYYY")]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("strong",{children:"Lote: "})," ",t.cotizacion.lote]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("strong",{children:"Marca y Modelo: "})," ",t.cotizacion.marca," - ",t.cotizacion.modelo]}),r.jsxs("div",{className:"flex flex-row justify-between",children:[r.jsxs("div",{children:[r.jsx("strong",{children:"Estado: "})," ",t.estado_importacion.estado_importacion]}),r.jsx(I,{type:"link",danger:!0,htmlType:"button",icon:r.jsx(S.Eye,{}),onClick:()=>u(t.id_vehiculo),children:"Ver"})]})]},t.id_vehiculo)}):r.jsx("div",{className:"flex justify-center mx-5",children:r.jsx(Ee,{size:"small",rowClassName:(t,m)=>m%2===0?"table-row-light":"table-row-dark",pagination:!1,className:"table",loading:s,showSorterTooltip:!1,rowKey:"id_subasta",dataSource:d,columns:[{title:"Fecha",dataIndex:"fecha_creacion",ellipsis:!0,sorter:!0,render:t=>r.jsx("span",{children:z(t,"DD/MM/YYYY")})},{title:"Loter",dataIndex:"lote",ellipsis:!0,sorter:!0,render:(t,{cotizacion:m})=>r.jsx("span",{children:m==null?void 0:m.lote})},{title:"Marca y Modelo",dataIndex:"cotizacion",ellipsis:!0,render:t=>r.jsxs("span",{children:[t.marca," - ",t.modelo]})},{title:"Estado",dataIndex:"estado_importacion",sorter:!0,render:t=>r.jsx("span",{children:t.estado_importacion})},{title:"Opciones",dataIndex:"operacion",width:80,render:(t,m)=>r.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[m.estado_importacion.id_estado_importacion===1&&r.jsx(w,{title:"Cargar factura",children:r.jsx(we,{accept:".pdf",customRequest:c=>b(c.file,m.id_vehiculo),onChange:c=>c.file.status="done",children:r.jsx(I,{style:{width:40},icon:r.jsx(S.Upload,{}),type:"text",size:"small"})})}),r.jsx(w,{title:"Ver detalle",children:r.jsx(I,{style:{width:40},icon:r.jsx(S.Eye,{}),type:"text",size:"small",onClick:()=>u(m.id_vehiculo)})})]})}]})}),d.some(t=>t.estado_importacion.id_estado_importacion===1)&&r.jsx(A,{message:"Existen facturas pendientes de cargar",type:"warning"})]})};export{Ze as CustomerOrders};
