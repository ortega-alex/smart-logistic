import{r,j as e,O as S}from"./index-BrF0_OcH.js";import{B as h,s as m,I as y}from"./method-http.utility-DG_YiQSg.js";import{h as I,a as A,b as N}from"./aution.service-BaqKL2F-.js";import{F as u,I as p}from"./index-55zqkDzK.js";import{a as w,L as E,F as C,M as _}from"./Table-CJLMhde3.js";import"./Private-DkUc7OPa.js";const v={id_subasta:0,subasta:"",estado:!0},k=({aution:a,onClose:i})=>{const[l,n]=r.useState(!1),o=async d=>{try{n(!0);let t;a.id_subasta>0?t=await I({...a,...d}):t=await A(d),t.message?m.warning(t.message):(m.success(`Subasta ${a.id_subasta>0?"editada":"agregada"} correctamente`),i())}catch(t){m.error(`Error http add or edit aution: ${t.message}`)}finally{n(!1)}};return e.jsxs(u,{layout:"vertical",initialValues:a,onFinish:o,children:[e.jsx(u.Item,{label:"Nombre Subasta",name:"subasta",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(p,{placeholder:"Ingrese el nombre"})}),e.jsx(u.Item,{label:"Alias",name:"alias",className:"flex-1",children:e.jsx(p,{placeholder:"Ingrese un alias"})}),e.jsx(u.Item,{name:"estado",label:"Estado",valuePropName:"checked",children:e.jsx(w,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"text-right",children:e.jsx(h,{type:"primary",htmlType:"submit",loading:l,disabled:l,children:"Enviar"})})]})},O=()=>{const a=S(s=>s.device),i="Subastas",[l,n]=r.useState(v),[o,d]=r.useState([]),[t,c]=r.useState(!1),[j,b]=r.useState(!1),g=s=>{n(s),c(!0)},f=()=>{b(!0),N().then(s=>d(s)).catch(s=>m.error(`Erro http get autions: ${s.message}`)).finally(()=>b(!1))};return r.useEffect(()=>{f()},[]),e.jsxs("div",{className:"h-100 flex flex-column p-3",children:[e.jsxs("div",{className:"flex flex-md-column gap-3 justify-between",children:[e.jsx("h3",{children:i}),e.jsx("div",{children:e.jsx(p.Search,{placeholder:"Buscar",onSearch:()=>{},enterButton:!0})}),e.jsx(h,{type:"primary",htmlType:"button",onClick:()=>{n(v),c(!0)},children:"Agregar"})]}),a?e.jsx(E,{dataSource:o,loading:j,renderItem:s=>e.jsxs("div",{className:"item-list",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Nombre: "})," ",s.subasta]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Alias: "})," ",s.alias]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estado: "})," ",s.estado?"Activo":"Inactivo"]}),e.jsx(h,{type:"link",danger:!0,htmlType:"button",icon:e.jsx(y.Edit,{}),onClick:()=>g(s),children:"Editar"})]})]},s.id_subasta)}):e.jsx(C,{size:"small",rowClassName:(s,x)=>x%2===0?"table-row-light":"table-row-dark",pagination:{position:["none","bottomRight"],showSizeChanger:!0,pageSizeOptions:[50,100,250,500]},className:"table",loading:j,showSorterTooltip:!1,rowKey:"id_subasta",dataSource:o,columns:[{title:"No",dataIndex:"id_subasta"},{title:"Nombre",dataIndex:"subasta",ellipsis:!0,sorter:!0},{title:"Alias",dataIndex:"alias",ellipsis:!0,sorter:!0},{title:"Estado",dataIndex:"estado",render:s=>e.jsx("span",{className:s?"text-success":"text-danger",children:s?"Actuvi":"Inactivo"})},{title:"Opciones",dataIndex:"operacion",width:80,render:(s,x)=>e.jsx("div",{className:"text-center",children:e.jsx(h,{style:{width:40},icon:e.jsx(y.Edit,{}),type:"primary",size:"small",onClick:()=>g(x)})})}]}),e.jsx(_,{open:t,title:e.jsxs("h3",{children:[l.id_subasta>0?"Editar":"Agregar"," ",i.substring(0,i.length-1)]}),footer:null,onCancel:()=>c(!1),centered:!0,destroyOnClose:!0,children:e.jsx(k,{aution:l,onClose:()=>{f(),c(!1)}})})]})};export{O as Aution};
