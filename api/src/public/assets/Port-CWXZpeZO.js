import{r as a,j as e,O as S}from"./index-v4TgjM65.js";import{N as x,B as h,s as u,I as w}from"./method-http.utility-Yd4-WvwD.js";import{F as m,I as E}from"./index-D1AYOONJ.js";import{a as N,L as I,F as P,M as C}from"./Table-zb71sDZt.js";import"./Private-XkMrUoZW.js";const v={id_puerto:0,puerto:"",estado:!0},j="/port",_=async()=>await x({path:j,method:"GET"}),k=async s=>await x({path:j,method:"POST",data:s}),T=async s=>await x({path:`${j}/${s.id_puerto}`,method:"PUT",data:s}),A=({port:s,onClose:o})=>{const[i,n]=a.useState(!1),l=async d=>{try{n(!0);let r;s.id_puerto>0?r=await T({...s,...d}):r=await k(d),r.message?u.warning(r.message):(u.success(`Puerto ${s.id_puerto>0?"editada":"agregada"} correctamente`),o())}catch(r){u.error(`Error http add or edit port: ${r.message}`)}finally{n(!1)}};return e.jsxs(m,{layout:"vertical",initialValues:s,onFinish:l,children:[e.jsx(m.Item,{label:"Nombre",name:"puerto",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(E,{placeholder:"Ingrese el nombre"})}),e.jsx(m.Item,{name:"estado",label:"Estado",valuePropName:"checked",children:e.jsx(N,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"text-right",children:e.jsx(h,{type:"primary",htmlType:"submit",loading:i,disabled:i,children:"Enviar"})})]})},L=()=>{const s=S(t=>t.device),o="Puertos",[i,n]=a.useState(v),[l,d]=a.useState([]),[r,c]=a.useState(!1),[g,f]=a.useState(!1),y=t=>{n(t),c(!0)},b=()=>{f(!0),_().then(t=>d(t)).catch(t=>u.error(`Error http get ports: ${t.message}`)).finally(()=>f(!1))};return a.useEffect(()=>{b()},[]),e.jsxs("div",{className:"h-100 flex flex-column p-3",children:[e.jsxs("div",{className:"flex flex-md-column gap-3 justify-between",children:[e.jsx("h3",{children:o}),e.jsx("div",{children:e.jsx(E.Search,{placeholder:"Buscar",onSearch:()=>{},enterButton:!0})}),e.jsx(h,{type:"primary",htmlType:"button",onClick:()=>{n(v),c(!0)},children:"Agregar"})]}),s?e.jsx(I,{dataSource:l,loading:g,renderItem:t=>e.jsxs("div",{className:"item-list",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Nombre: "})," ",t.puerto]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estado: "})," ",t.estado?"Activo":"Inactivo"]}),e.jsx(h,{type:"link",danger:!0,htmlType:"button",icon:e.jsx(w.Edit,{}),onClick:()=>y(t),children:"Editar"})]})]},t.id_puerto)}):e.jsx(P,{size:"small",rowClassName:(t,p)=>p%2===0?"table-row-light":"table-row-dark",pagination:{position:["none","bottomRight"],showSizeChanger:!0,pageSizeOptions:[50,100,250,500]},className:"table",loading:g,showSorterTooltip:!1,rowKey:"id_subasta",dataSource:l,columns:[{title:"No",dataIndex:"id_puerto"},{title:"Nombre",dataIndex:"puerto",ellipsis:!0,sorter:!0},{title:"Estado",dataIndex:"estado",render:t=>e.jsx("span",{className:t?"text-success":"text-danger",children:t?"Actuvi":"Inactivo"})},{title:"Opciones",dataIndex:"operacion",width:80,render:(t,p)=>e.jsx("div",{className:"text-center",children:e.jsx(h,{style:{width:40},icon:e.jsx(w.Edit,{}),type:"primary",size:"small",onClick:()=>y(p)})})}]}),e.jsx(C,{open:r,title:e.jsxs("h3",{children:[i.id_puerto>0?"Editar":"Agregar"," ",o.substring(0,o.length-1)]}),footer:null,onCancel:()=>c(!1),centered:!0,destroyOnClose:!0,children:e.jsx(A,{port:i,onClose:()=>{b(),c(!1)}})})]})};export{L as Port};
