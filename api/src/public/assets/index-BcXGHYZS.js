import{D as re,n as L,r as l,m as se,g as w,C as ie,M as ae,aF as T,aX as le,aD as ce,a1 as de,a4 as ue,a3 as me,q as B,a as pe,j as s,aU as P,b as z}from"./index-fBuO0l8w.js";import{g as fe,p as ge,aa as he,ad as xe,q as ye,ae as be,v as Ce,r as $e,T as E,B as I,I as S,s as v}from"./method-http.utility-CM8CHeIw.js";import{h as je}from"./import-history.service-lmvZ93oN.js";import{b as Ie}from"./vehicles.service-CBPKl_Fy.js";import{S as Se}from"./Search-Cy_uaIq-.js";import{L as ve}from"./index-O_xYGJnl.js";import{F as _e}from"./Table-CYsj1JvR.js";import{U as Ee}from"./index-DNSfZAjo.js";import"./index-BKdQ44jl.js";import"./Notification-BI9cwgRy.js";import"./row-BIFJ6Q4x.js";import"./DownOutlined-CODLCnfK.js";import"./fade-R8mJI5-o.js";import"./progress-CrTmyKDp.js";const _=(e,n,t,r,a)=>({background:e,border:`${L(r.lineWidth)} ${r.lineType} ${n}`,[`${a}-icon`]:{color:t}}),we=e=>{const{componentCls:n,motionDurationSlow:t,marginXS:r,marginSM:a,fontSize:d,fontSizeLG:m,lineHeight:g,borderRadiusLG:h,motionEaseInOutCirc:p,withDescriptionIconSize:y,colorText:$,colorTextHeading:o,withDescriptionPadding:u,defaultPadding:c}=e;return{[n]:Object.assign(Object.assign({},re(e)),{position:"relative",display:"flex",alignItems:"center",padding:c,wordWrap:"break-word",borderRadius:h,[`&${n}-rtl`]:{direction:"rtl"},[`${n}-content`]:{flex:1,minWidth:0},[`${n}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:d,lineHeight:g},"&-message":{color:o},[`&${n}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${t} ${p}, opacity ${t} ${p},
        padding-top ${t} ${p}, padding-bottom ${t} ${p},
        margin-bottom ${t} ${p}`},[`&${n}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${n}-with-description`]:{alignItems:"flex-start",padding:u,[`${n}-icon`]:{marginInlineEnd:a,fontSize:y,lineHeight:0},[`${n}-message`]:{display:"block",marginBottom:r,color:o,fontSize:m},[`${n}-description`]:{display:"block",color:$}},[`${n}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Ne=e=>{const{componentCls:n,colorSuccess:t,colorSuccessBorder:r,colorSuccessBg:a,colorWarning:d,colorWarningBorder:m,colorWarningBg:g,colorError:h,colorErrorBorder:p,colorErrorBg:y,colorInfo:$,colorInfoBorder:o,colorInfoBg:u}=e;return{[n]:{"&-success":_(a,r,t,e,n),"&-info":_(u,o,$,e,n),"&-warning":_(g,m,d,e,n),"&-error":Object.assign(Object.assign({},_(y,p,h,e,n)),{[`${n}-description > pre`]:{margin:0,padding:0}})}}},Me=e=>{const{componentCls:n,iconCls:t,motionDurationMid:r,marginXS:a,fontSizeIcon:d,colorIcon:m,colorIconHover:g}=e;return{[n]:{"&-action":{marginInlineStart:a},[`${n}-close-icon`]:{marginInlineStart:a,padding:0,overflow:"hidden",fontSize:d,lineHeight:L(d),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${t}-close`]:{color:m,transition:`color ${r}`,"&:hover":{color:g}}},"&-close-text":{color:m,transition:`color ${r}`,"&:hover":{color:g}}}}},Re=e=>({withDescriptionIconSize:e.fontSizeHeading3,defaultPadding:`${e.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${e.paddingMD}px ${e.paddingContentHorizontalLG}px`}),Oe=fe("Alert",e=>[we(e),Ne(e),Me(e)],Re);var H=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]]);return t};const De={success:ye,info:be,error:Ce,warning:$e},Te=e=>{const{icon:n,prefixCls:t,type:r}=e,a=De[r]||null;return n?he(n,l.createElement("span",{className:`${t}-icon`},n),()=>({className:w(`${t}-icon`,{[n.props.className]:n.props.className})})):l.createElement(a,{className:`${t}-icon`})},Be=e=>{const{isClosable:n,prefixCls:t,closeIcon:r,handleClose:a,ariaProps:d}=e,m=r===!0||r===void 0?l.createElement(xe,null):r;return n?l.createElement("button",Object.assign({type:"button",onClick:a,className:`${t}-close-icon`,tabIndex:0},d),m):null},k=l.forwardRef((e,n)=>{const{description:t,prefixCls:r,message:a,banner:d,className:m,rootClassName:g,style:h,onMouseEnter:p,onMouseLeave:y,onClick:$,afterClose:o,showIcon:u,closable:c,closeText:b,closeIcon:j,action:N,id:V}=e,Y=H(e,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[M,F]=l.useState(!1),R=l.useRef(null);l.useImperativeHandle(n,()=>({nativeElement:R.current}));const{getPrefixCls:U,direction:W,alert:i}=l.useContext(se),f=U("alert",r),[G,X,q]=Oe(f),K=x=>{var C;F(!0),(C=e.onClose)===null||C===void 0||C.call(e,x)},O=l.useMemo(()=>e.type!==void 0?e.type:d?"warning":"info",[e.type,d]),J=l.useMemo(()=>typeof c=="object"&&c.closeIcon||b?!0:typeof c=="boolean"?c:j!==!1&&j!==null&&j!==void 0?!0:!!(i!=null&&i.closable),[b,j,c,i==null?void 0:i.closable]),D=d&&u===void 0?!0:u,Q=w(f,`${f}-${O}`,{[`${f}-with-description`]:!!t,[`${f}-no-icon`]:!D,[`${f}-banner`]:!!d,[`${f}-rtl`]:W==="rtl"},i==null?void 0:i.className,m,g,q,X),Z=ge(Y,{aria:!0,data:!0}),ee=l.useMemo(()=>{var x,C;return typeof c=="object"&&c.closeIcon?c.closeIcon:b||(j!==void 0?j:typeof(i==null?void 0:i.closable)=="object"&&(!((x=i==null?void 0:i.closable)===null||x===void 0)&&x.closeIcon)?(C=i==null?void 0:i.closable)===null||C===void 0?void 0:C.closeIcon:i==null?void 0:i.closeIcon)},[j,c,b,i==null?void 0:i.closeIcon]),ne=l.useMemo(()=>{const x=c??(i==null?void 0:i.closable);return typeof x=="object"?H(x,["closeIcon"]):{}},[c,i==null?void 0:i.closable]);return G(l.createElement(ie,{visible:!M,motionName:`${f}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:x=>({maxHeight:x.offsetHeight}),onLeaveEnd:o},(x,C)=>{let{className:oe,style:te}=x;return l.createElement("div",Object.assign({id:V,ref:ae(R,C),"data-show":!M,className:w(Q,oe),style:Object.assign(Object.assign(Object.assign({},i==null?void 0:i.style),h),te),onMouseEnter:p,onMouseLeave:y,onClick:$,role:"alert"},Z),D?l.createElement(Te,{description:t,icon:e.icon,prefixCls:f,type:O}):null,l.createElement("div",{className:`${f}-content`},a?l.createElement("div",{className:`${f}-message`},a):null,t?l.createElement("div",{className:`${f}-description`},t):null),N?l.createElement("div",{className:`${f}-action`},N):null,l.createElement(Be,{isClosable:J,prefixCls:f,closeIcon:ee,handleClose:K,ariaProps:ne}))}))});function Pe(e,n,t){return n=T(n),le(e,ce()?Reflect.construct(n,t||[],T(e).constructor):n.apply(e,t))}let ze=function(e){function n(){var t;return me(this,n),t=Pe(this,n,arguments),t.state={error:void 0,info:{componentStack:""}},t}return de(n,e),ue(n,[{key:"componentDidCatch",value:function(r,a){this.setState({error:r,info:a})}},{key:"render",value:function(){const{message:r,description:a,id:d,children:m}=this.props,{error:g,info:h}=this.state,p=(h==null?void 0:h.componentStack)||null,y=typeof r>"u"?(g||"").toString():r,$=typeof a>"u"?p:a;return g?l.createElement(k,{id:d,type:"error",message:y,description:l.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},$)}):m}}])}(l.Component);const A=k;A.ErrorBoundary=ze;const Qe=()=>{const e=B(o=>o.device),n=B(o=>o.session_customer),t=pe(),[r,a]=l.useState(!1),[d,m]=l.useState([]),[g,h]=l.useState(""),p=o=>t(`/${z.PRIVATE_CUSTOMER}/${z.CUSTOMER_ORDER_DETAIL}/${o}`),y=()=>{a(!0),Ie(n.id_cliente).then(o=>m(o)).catch(o=>v.error(`Error http get vehicles by customer id ${o.message}`)).finally(()=>a(!1))},$=(o,u)=>{const c={file:o,id_cliente:n.id_cliente,id_estado_importacion:u.estado_importacion.id_estado_importacion+1,descripcion:"El cliente ha cargado la factura",visible_cliente:!0};je(u.id_vehiculo,c).then(b=>{b.success?(v.success(b.message),y()):v.warning(b.message)}).catch(b=>v.error(`Error http upload invoice ${b.message}`))};return l.useEffect(()=>{console.log(g),y()},[]),s.jsxs("div",{className:"h-100 flex flex-column p-3",children:[s.jsxs("div",{className:"flex justify-center mb-3",children:[s.jsx(E,{title:"Recargar",children:s.jsx(I,{type:"text",htmlType:"button",icon:s.jsx(S.Reload,{}),onClick:()=>y()})}),s.jsx(Se,{onSearch:o=>h(o),onReset:()=>h("")})]}),e?s.jsx(ve,{dataSource:d,loading:r,renderItem:o=>s.jsxs("div",{className:"item-list",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("strong",{children:"fecha_creacion: "})," ",P(o.fecha_creacion??"","DD/MM/YYYY")]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("strong",{children:"Lote: "})," ",o.cotizacion.lote]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("strong",{children:"Marca y Modelo: "})," ",o.cotizacion.marca," - ",o.cotizacion.modelo]}),s.jsxs("div",{className:"flex flex-row justify-between",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Estado: "})," ",o.estado_importacion.estado_importacion]}),s.jsx(I,{type:"link",danger:!0,htmlType:"button",icon:s.jsx(S.Eye,{}),onClick:()=>p(o.id_vehiculo),children:"Ver"})]})]},o.id_vehiculo)}):s.jsx("div",{className:"flex justify-center mx-5",children:s.jsx(_e,{size:"small",rowClassName:(o,u)=>u%2===0?"table-row-light":"table-row-dark",pagination:!1,className:"table",loading:r,showSorterTooltip:!1,rowKey:"id_subasta",dataSource:d,columns:[{title:"Fecha",dataIndex:"fecha_creacion",ellipsis:!0,sorter:!0,render:o=>s.jsx("span",{children:P(o,"DD/MM/YYYY")})},{title:"Loter",dataIndex:"lote",ellipsis:!0,sorter:!0,render:(o,{cotizacion:u})=>s.jsx("span",{children:u==null?void 0:u.lote})},{title:"Marca y Modelo",dataIndex:"cotizacion",ellipsis:!0,render:o=>s.jsxs("span",{children:[o.marca," - ",o.modelo]})},{title:"Estado",dataIndex:"estado_importacion",sorter:!0,render:o=>s.jsx("span",{children:o.estado_importacion})},{title:"Opciones",dataIndex:"operacion",width:80,render:(o,u)=>s.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[u.estado_importacion.id_estado_importacion===1&&s.jsx(E,{title:"Cargar factura",children:s.jsx(Ee,{accept:".pdf",customRequest:c=>$(c.file,u),onChange:c=>c.file.status="done",maxCount:1,children:s.jsx(I,{style:{width:40},icon:s.jsx(S.Upload,{}),type:"text",size:"small"})})}),s.jsx(E,{title:"Ver detalle",children:s.jsx(I,{style:{width:40},icon:s.jsx(S.Eye,{}),type:"text",size:"small",onClick:()=>p(u.id_vehiculo)})})]})}]})}),d.some(o=>o.estado_importacion.id_estado_importacion===1)&&s.jsx(A,{message:"Existen facturas pendientes de cargar",type:"warning"})]})};export{Qe as CustomerOrders};
