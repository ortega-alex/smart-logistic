import{r as i,j as e,O as C}from"./index-BrF0_OcH.js";import{N as g,s as c,B as x,I as S}from"./method-http.utility-DG_YiQSg.js";import{b as N}from"./aution.service-BaqKL2F-.js";import{F as m,I as E}from"./index-55zqkDzK.js";import{S as I,a as v,L as _,F as k,M as A}from"./Table-CJLMhde3.js";import"./Private-DkUc7OPa.js";const w={id_grua:0,grua:"",estado:!0},j="/crane",T=async()=>await g({path:j,method:"GET"}),F=async a=>await g({path:j,data:a,method:"POST"}),G=async a=>await g({path:`${j}/${a.id_grua}`,data:a,method:"PUT"}),$=({crane:a,onClose:o})=>{const[d,u]=i.useState([]),[l,h]=i.useState(!1),p=async s=>{try{h(!0);let r;a.id_grua>0?r=await G({...a,...s}):r=await F(s),r.message?c.warning(r.message):(c.success(`Grua ${a.id_grua>0?"editada":"agregada"} correctamente`),o())}catch(r){c.error(`Error http add crane: ${r.message}`)}finally{h(!1)}};return i.useEffect(()=>{N().then(s=>u(s)).catch(s=>c.error(`Error http get autions: ${s.message}`))},[]),e.jsxs(m,{layout:"vertical",initialValues:a,onFinish:p,children:[e.jsx(m.Item,{label:"Nombre",name:"grua",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(E,{placeholder:"Ingrese el nombre"})}),e.jsx(m.Item,{label:"Subasta",name:"id_subasta",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(I,{className:"w-100",placeholder:"Seleccione una opción",options:d.filter(s=>s.estado).map(s=>({value:s.id_subasta,label:s.subasta}))})}),e.jsx(m.Item,{name:"estado",label:"Estado",valuePropName:"checked",children:e.jsx(v,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"text-right",children:e.jsx(x,{type:"primary",htmlType:"submit",loading:l,disabled:l,children:"Enviar"})})]})},P=()=>{const a=C(t=>t.device),o="Gruas",[d,u]=i.useState(w),[l,h]=i.useState([]),[p,s]=i.useState(!1),[r,b]=i.useState(!1),f=t=>{var n;u({...t,id_subasta:(n=t.subasta)==null?void 0:n.id_subasta}),s(!0)},y=()=>{b(!0),T().then(t=>h(t)).catch(t=>c.error(`Error http get cranes: ${t.message}`)).finally(()=>b(!1))};return i.useEffect(()=>{y()},[]),e.jsxs("div",{className:"h-100 flex flex-column p-3",children:[e.jsxs("div",{className:"flex flex-md-column gap-3 justify-between",children:[e.jsx("h3",{children:o}),e.jsx("div",{children:e.jsx(E.Search,{placeholder:"Buscar",onSearch:()=>{},enterButton:!0})}),e.jsx(x,{type:"primary",htmlType:"button",onClick:()=>{u(w),s(!0)},children:"Agregar"})]}),a?e.jsx(_,{dataSource:l,loading:r,renderItem:t=>{var n;return e.jsxs("div",{className:"item-list",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Nombre: "})," ",t.grua]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Subasta: "})," ",(n=t.subasta)==null?void 0:n.subasta]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estado: "})," ",t.estado?"Activo":"Inactivo"]}),e.jsx(x,{type:"link",danger:!0,htmlType:"button",icon:e.jsx(S.Edit,{}),onClick:()=>f(t),children:"Editar"})]})]},t.id_subasta)}}):e.jsx(k,{size:"small",rowClassName:(t,n)=>n%2===0?"table-row-light":"table-row-dark",pagination:{position:["none","bottomRight"],showSizeChanger:!0,pageSizeOptions:[50,100,250,500]},className:"table",loading:r,showSorterTooltip:!1,rowKey:"id_grua",dataSource:l,columns:[{title:"No",dataIndex:"id_grua"},{title:"Nombre",dataIndex:"grua",ellipsis:!0,sorter:!0},{title:"Subasta",dataIndex:"subasta",ellipsis:!0,sorter:!0,render:t=>e.jsx("span",{children:t==null?void 0:t.subasta})},{title:"Estado",dataIndex:"estado",render:t=>e.jsx("span",{className:t?"text-success":"text-danger",children:t?"Actuvi":"Inactivo"})},{title:"Opciones",dataIndex:"operacion",width:80,render:(t,n)=>e.jsx("div",{className:"text-center",children:e.jsx(x,{style:{width:40},icon:e.jsx(S.Edit,{}),type:"primary",size:"small",onClick:()=>f(n)})})}]}),e.jsx(A,{open:p,title:e.jsxs("h3",{children:[d.id_grua>0?"Editar":"Agregar"," ",o.substring(0,o.length-1)]}),footer:null,onCancel:()=>s(!1),centered:!0,destroyOnClose:!0,children:e.jsx($,{crane:d,onClose:()=>{y(),s(!1)}})})]})};export{P as Crane};
