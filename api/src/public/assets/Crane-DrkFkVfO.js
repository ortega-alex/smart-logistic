import{r,j as e,O as v}from"./index-C_I45hcy.js";import{s as m,B as x,I}from"./method-http.utility-DRGzK4dc.js";import{S as k}from"./Search-DSw0sd9I.js";import{a as A,b as L,h as O}from"./crane.service-DLvrehRJ.js";import{M as N}from"./Utilityes.d-EXBqBskY.js";import{h as T}from"./aution.service-BC8CAEG9.js";import{F as i}from"./index-DaI31ieK.js";import{I as F}from"./index-C0Q_eWM9.js";import{S as E,L as M,F as G}from"./Table-C1au93bv.js";import{T as $}from"./index-D0b9nMse.js";import{S as B}from"./index-gsOUyw99.js";import{M as q}from"./index-CKyuLA3S.js";import"./Private-BjoEPDeC.js";const _={id_grua:0,grua:"",estado:!0,moneda:"$",costo:0},z=({crane:n,onClose:l})=>{const[u,h]=r.useState([]),[d,c]=r.useState(!1),g=async a=>{try{c(!0);let o;n.id_grua>0?o=await A({...n,...a}):o=await L(a),o.message?m.warning(o.message):(m.success(`Grua ${n.id_grua>0?"editada":"agregada"} correctamente`),l())}catch(o){m.error(`Error http add crane: ${o.message}`)}finally{c(!1)}};return r.useEffect(()=>{T().then(a=>h(a)).catch(a=>m.error(`Error http get autions: ${a.message}`))},[]),e.jsxs(i,{layout:"vertical",initialValues:n,onFinish:g,children:[e.jsx(i.Item,{label:"Nombre",name:"grua",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(F,{placeholder:"Ingrese el nombre"})}),e.jsx(i.Item,{label:"Subasta (Opcional)",name:"id_subasta",children:e.jsx(E,{allowClear:!0,className:"w-100",placeholder:"Seleccione una opción",options:u.filter(a=>a.estado).map(a=>({value:a.id_subasta,label:a.subasta}))})}),e.jsx(i.Item,{label:"Costo",name:"costo",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx($,{className:"w-100",addonBefore:e.jsx(i.Item,{name:"moneda",style:{margin:0,padding:0,width:80},children:e.jsx(E,{className:"w-100",options:Object.keys(N).map(a=>({value:N[a],label:a}))})}),min:0,placeholder:"Ingrese un costo"})}),e.jsx(i.Item,{name:"estado",label:"Estado",valuePropName:"checked",children:e.jsx(B,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"text-right",children:e.jsx(x,{type:"primary",htmlType:"submit",loading:d,disabled:d,children:"Enviar"})})]})},ee=()=>{const n=v(s=>s.device),l="Gruas",[u,h]=r.useState(_),[d,c]=r.useState([]),[g,a]=r.useState([]),[o,p]=r.useState(!1),[b,j]=r.useState(!1),C=s=>{let t=[...g];s.trim()!==""&&(t=t.filter(f=>{var w;return f.id_grua===Number(s)||f.grua.toLowerCase().indexOf(s.toLowerCase())!==-1||((w=f.subasta)==null?void 0:w.subasta.toLowerCase().indexOf(s.toLowerCase()))!==-1})),c(t)},y=s=>{var t;h({...s,id_subasta:(t=s.subasta)==null?void 0:t.id_subasta}),p(!0)},S=()=>{j(!0),O().then(s=>{c(s),a(s)}).catch(s=>m.error(`Error http get cranes: ${s.message}`)).finally(()=>j(!1))};return r.useEffect(()=>{S()},[]),e.jsxs("div",{className:"h-100 flex flex-column p-3",children:[e.jsxs("div",{className:"flex flex-md-column gap-3 justify-between",children:[e.jsx("h3",{children:l}),e.jsx("div",{children:e.jsx(k,{onSearch:C,onReset:()=>C("")})}),e.jsx(x,{type:"primary",htmlType:"button",onClick:()=>{h(_),p(!0)},children:"Agregar"})]}),n?e.jsx(M,{dataSource:d,loading:b,renderItem:s=>{var t;return e.jsxs("div",{className:"item-list",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Nombre: "})," ",s.grua]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Subasta: "})," ",(t=s.subasta)==null?void 0:t.subasta]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estado: "})," ",s.estado?"Activo":"Inactivo"]}),e.jsx(x,{type:"link",danger:!0,htmlType:"button",icon:e.jsx(I.Edit,{}),onClick:()=>y(s),children:"Editar"})]})]},s.id_subasta)}}):e.jsx(G,{size:"small",rowClassName:(s,t)=>t%2===0?"table-row-light":"table-row-dark",pagination:!1,className:"table",loading:b,showSorterTooltip:!1,rowKey:"id_grua",dataSource:d,columns:[{title:"No",dataIndex:"id_grua"},{title:"Nombre",dataIndex:"grua",ellipsis:!0,sorter:!0},{title:"Subasta",dataIndex:"subasta",ellipsis:!0,sorter:!0,render:s=>e.jsx("span",{children:s==null?void 0:s.subasta})},{title:"Estado",dataIndex:"estado",render:s=>e.jsx("span",{className:s?"text-success":"text-danger",children:s?"Actuvi":"Inactivo"})},{title:"Opciones",dataIndex:"operacion",width:80,render:(s,t)=>e.jsx("div",{className:"text-center",children:e.jsx(x,{style:{width:40},icon:e.jsx(I.Edit,{}),type:"primary",size:"small",onClick:()=>y(t)})})}]}),e.jsx(q,{open:o,title:e.jsxs("h3",{children:[u.id_grua>0?"Editar":"Agregar"," ",l.substring(0,l.length-1)]}),footer:null,onCancel:()=>p(!1),centered:!0,destroyOnClose:!0,children:e.jsx(z,{crane:u,onClose:()=>{S(),p(!1)}})})]})};export{ee as Crane};
