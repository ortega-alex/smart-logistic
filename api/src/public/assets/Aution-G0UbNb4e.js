import{r,j as e,q as E}from"./index-BKeSh-za.js";import{B as h,s as x,I as A}from"./method-http.utility-BqWs-HUi.js";import{a as _,b as k,h as L}from"./aution.service-D5suFi5p.js";import{S as F}from"./Search-C06RTD8T.js";import{F as m}from"./index-D1ov7vNX.js";import{I}from"./index-CdhWyq-o.js";import{S as T}from"./index-Cz9KrAQ8.js";import{L as M}from"./index-CvXNAYlc.js";import{F as O}from"./Table-BisBHS4k.js";import{M as $}from"./index-DR3JyN9M.js";import"./row-xrRCuAxq.js";import"./Notification-BCtfLTOT.js";import"./customer.service-CpYLP9T3.js";import"./user.service-DGdalJkS.js";import"./DownOutlined-uChH8jli.js";import"./fade-CQfhyCPf.js";const N={id_subasta:0,subasta:"",estado:!0},q=({aution:i,onClose:o})=>{const[l,n]=r.useState(!1),c=async d=>{try{n(!0);let t;i.id_subasta>0?t=await _({...i,...d}):t=await k(d),t.message?x.warning(t.message):(x.success(`Subasta ${i.id_subasta>0?"editada":"agregada"} correctamente`),o())}catch(t){x.error(`Error http add or edit aution: ${t.message}`)}finally{n(!1)}};return e.jsxs(m,{layout:"vertical",initialValues:i,onFinish:c,children:[e.jsx(m.Item,{label:"Nombre Subasta",name:"subasta",rules:[{required:!0,message:"El campo es obligatorio"}],children:e.jsx(I,{placeholder:"Ingrese el nombre"})}),e.jsx(m.Item,{label:"Alias",name:"alias",className:"flex-1",children:e.jsx(I,{placeholder:"Ingrese un alias"})}),e.jsx(m.Item,{name:"estado",label:"Estado",valuePropName:"checked",children:e.jsx(T,{checkedChildren:"Activo",unCheckedChildren:"Inactivo"})}),e.jsx("div",{className:"text-right",children:e.jsx(h,{type:"primary",htmlType:"submit",loading:l,disabled:l,children:"Enviar"})})]})},ee=()=>{const i=E(s=>s.device),o="Subastas",[l,n]=r.useState(N),[c,d]=r.useState([]),[t,v]=r.useState([]),[C,u]=r.useState(!1),[f,b]=r.useState(!1),j=(s="")=>{let a=[...t];s!==""&&(a=a.filter(p=>{var S,w;return p.id_subasta===Number(s)||((S=p.alias)==null?void 0:S.toLowerCase().indexOf(s.toLowerCase()))!==-1||((w=p.subasta)==null?void 0:w.toLowerCase().indexOf(s.toLowerCase()))!==-1})),d(a)},g=s=>{n(s),u(!0)},y=()=>{b(!0),L().then(s=>{d(s),v(s)}).catch(s=>x.error(`Erro http get autions: ${s.message}`)).finally(()=>b(!1))};return r.useEffect(()=>{y()},[]),e.jsxs("div",{className:"h-100 flex flex-column p-3",children:[e.jsxs("div",{className:"flex flex-md-column gap-3 justify-between",children:[e.jsx("h3",{children:o}),e.jsx("div",{children:e.jsx(F,{onSearch:j,onReset:()=>j("")})}),e.jsx(h,{type:"primary",htmlType:"button",onClick:()=>{n(N),u(!0)},children:"Agregar"})]}),i?e.jsx(M,{dataSource:c,loading:f,renderItem:s=>e.jsxs("div",{className:"item-list",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Nombre: "})," ",s.subasta]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("strong",{children:"Alias: "})," ",s.alias]}),e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Estado: "})," ",s.estado?"Activo":"Inactivo"]}),e.jsx(h,{type:"link",danger:!0,htmlType:"button",icon:e.jsx(A.Edit,{}),onClick:()=>g(s),children:"Editar"})]})]},s.id_subasta)}):e.jsx(O,{size:"small",rowClassName:(s,a)=>a%2===0?"table-row-light":"table-row-dark",pagination:!1,className:"table",loading:f,showSorterTooltip:!1,rowKey:"id_subasta",dataSource:c,columns:[{title:"No",dataIndex:"id_subasta"},{title:"Nombre",dataIndex:"subasta",ellipsis:!0,sorter:!0},{title:"Alias",dataIndex:"alias",ellipsis:!0,sorter:!0},{title:"Estado",dataIndex:"estado",render:s=>e.jsx("span",{className:s?"text-success":"text-danger",children:s?"Actuvi":"Inactivo"})},{title:"Opciones",dataIndex:"operacion",width:80,render:(s,a)=>e.jsx("div",{className:"text-center",children:e.jsx(h,{style:{width:40},icon:e.jsx(A.Edit,{}),type:"primary",size:"small",onClick:()=>g(a)})})}]}),e.jsx($,{open:C,title:e.jsxs("h3",{children:[l.id_subasta>0?"Editar":"Agregar"," ",o.substring(0,o.length-1)]}),footer:null,onCancel:()=>u(!1),centered:!0,destroyOnClose:!0,children:e.jsx(q,{aution:l,onClose:()=>{y(),u(!1)}})})]})};export{ee as Aution};
